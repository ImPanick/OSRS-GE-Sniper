<!DOCTYPE html>
<html>
<head>
  <title>GE Sniper Config - {{ guild_id }}</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <style>
    body { background:#000; color:#0f0; font-family:Arial; padding:20px; }
    .card { background:#001100; border:2px solid #0f0; padding:20px; margin:20px 0; border-radius:10px; }
    input, select { background:#000; color:#0f0; border:1px solid #0f0; padding:8px; width:100%; margin:10px 0; }
    button { background:#0f0; color:#000; padding:15px; font-weight:bold; border:none; width:100%; cursor:pointer; }
    button:hover { background:#00ff00; }
    .channel-grid { display:grid; grid-template-columns:1fr 1fr; gap:20px; }
  </style>
</head>
<body>
  <h1>SNIPER CONFIG — GUILD {{ guild_id }}</h1>
  <div class="card">
    <h2>CHANNEL ROUTING</h2>
    <div class="channel-grid">
      <div>
        <label>Cheap Flips (&lt; {{ (config.thresholds.cheap_max / 1000)|int }}k)</label>
        <input type="text" id="cheap_flips" placeholder="#cheap-flips" value="{{ config.channels.cheap_flips or '' }}">
      </div>
      <div>
        <label>Medium Flips ({{ (config.thresholds.cheap_max / 1000)|int }}k - {{ (config.thresholds.medium_max / 1000)|int }}k)</label>
        <input type="text" id="medium_flips" value="{{ config.channels.medium_flips or '' }}">
      </div>
      <div>
        <label>Expensive Flips ({{ (config.thresholds.medium_max / 1000)|int }}k - {{ (config.thresholds.expensive_max / 1000000)|int }}M)</label>
        <input type="text" id="expensive_flips" value="{{ config.channels.expensive_flips or '' }}">
      </div>
      <div>
        <label>Billionaire Flips (&gt; {{ (config.thresholds.expensive_max / 1000000)|int }}M)</label>
        <input type="text" id="billionaire_flips" value="{{ config.channels.billionaire_flips or '' }}">
      </div>
      <div>
        <label>Recipe Items (Herbs, Secondaries, etc)</label>
        <input type="text" id="recipe_items" value="{{ config.channels.recipe_items or '' }}">
      </div>
      <div>
        <label>High-Alch Margins</label>
        <input type="text" id="high_alch_margins" value="{{ config.channels.high_alch_margins or '' }}">
      </div>
      <div>
        <label>High Limit + Volume Items</label>
        <input type="text" id="high_limit_items" value="{{ config.channels.high_limit_items or '' }}">
      </div>
    </div>
    <br>
    <button onclick="save()">SAVE CONFIG</button>
  </div>

  <div class="card">
    <h2>ROLE PING CONFIGURATION</h2>
    <p style="color:#0ff; font-size:0.9em; margin-bottom:15px;">
      Configure roles to ping based on risk level and quality. Enter role IDs or role names (without @).
    </p>
    <div class="channel-grid">
      <div>
        <label>Low Risk Dumps (&lt; 20 risk score)</label>
        <input type="text" id="risk_low" placeholder="Role ID or name" value="{{ config.roles.risk_low or '' }}">
      </div>
      <div>
        <label>Medium Risk Dumps (20-40 risk score)</label>
        <input type="text" id="risk_medium" placeholder="Role ID or name" value="{{ config.roles.risk_medium or '' }}">
      </div>
      <div>
        <label>High Risk Dumps (40-60 risk score)</label>
        <input type="text" id="risk_high" placeholder="Role ID or name" value="{{ config.roles.risk_high or '' }}">
      </div>
      <div>
        <label>Very High Risk Dumps (60+ risk score)</label>
        <input type="text" id="risk_very_high" placeholder="Role ID or name" value="{{ config.roles.risk_very_high or '' }}">
      </div>
      <div>
        <label>Nuclear Dumps (1.5M+ volume)</label>
        <input type="text" id="quality_nuclear" placeholder="Role ID or name" value="{{ config.roles.quality_nuclear or '' }}">
      </div>
      <div>
        <label>God-Tier Dumps (⭐⭐⭐⭐⭐)</label>
        <input type="text" id="quality_god_tier" placeholder="Role ID or name" value="{{ config.roles.quality_god_tier or '' }}">
      </div>
      <div>
        <label>Elite Dumps (⭐⭐⭐⭐)</label>
        <input type="text" id="quality_elite" placeholder="Role ID or name" value="{{ config.roles.quality_elite or '' }}">
      </div>
      <div>
        <label>Premium Dumps (⭐⭐⭐)</label>
        <input type="text" id="quality_premium" placeholder="Role ID or name" value="{{ config.roles.quality_premium or '' }}">
      </div>
      <div>
        <label>Good Dumps (⭐⭐)</label>
        <input type="text" id="quality_good" placeholder="Role ID or name" value="{{ config.roles.quality_good or '' }}">
      </div>
      <div>
        <label>Deal Dumps (⭐)</label>
        <input type="text" id="quality_deal" placeholder="Role ID or name" value="{{ config.roles.quality_deal or '' }}">
      </div>
      <div>
        <label>All Dumps (General)</label>
        <input type="text" id="dumps" placeholder="Role ID or name" value="{{ config.roles.dumps or '' }}">
      </div>
      <div>
        <label>All Spikes (General)</label>
        <input type="text" id="spikes" placeholder="Role ID or name" value="{{ config.roles.spikes or '' }}">
      </div>
      <div>
        <label>All Flips (General)</label>
        <input type="text" id="flips" placeholder="Role ID or name" value="{{ config.roles.flips or '' }}">
      </div>
    </div>
    <br>
    <button onclick="save()">SAVE CONFIG</button>
  </div>

  <script>
    function save() {
      const config = {
        channels: {
          cheap_flips: document.getElementById('cheap_flips').value || null,
          medium_flips: document.getElementById('medium_flips').value || null,
          expensive_flips: document.getElementById('expensive_flips').value || null,
          billionaire_flips: document.getElementById('billionaire_flips').value || null,
          recipe_items: document.getElementById('recipe_items').value || null,
          high_alch_margins: document.getElementById('high_alch_margins').value || null,
          high_limit_items: document.getElementById('high_limit_items').value || null
        },
        roles: {
          risk_low: document.getElementById('risk_low').value || null,
          risk_medium: document.getElementById('risk_medium').value || null,
          risk_high: document.getElementById('risk_high').value || null,
          risk_very_high: document.getElementById('risk_very_high').value || null,
          quality_nuclear: document.getElementById('quality_nuclear').value || null,
          quality_god_tier: document.getElementById('quality_god_tier').value || null,
          quality_elite: document.getElementById('quality_elite').value || null,
          quality_premium: document.getElementById('quality_premium').value || null,
          quality_good: document.getElementById('quality_good').value || null,
          quality_deal: document.getElementById('quality_deal').value || null,
          dumps: document.getElementById('dumps').value || null,
          spikes: document.getElementById('spikes').value || null,
          flips: document.getElementById('flips').value || null
        }
      }
      fetch(`/config/{{ guild_id }}`, {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify(config)
      }).then(r => alert("Config saved!"))
    }

  </script>
</body>
</html>